var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function o(){return Object.create(null)}function s(t){t.forEach(n)}function r(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function l(t,e,n,o){if(t){const s=u(t,e,n,o);return t[0](s)}}function u(t,e,n,o){return t[1]&&o?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](o(e))):n.ctx}function a(t,e,n,o){if(t[2]&&o){const s=t[2](o(n));if(void 0===e.dirty)return s;if("object"==typeof s){const t=[],n=Math.max(e.dirty.length,s.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|s[o];return t}return e.dirty|s}return e.dirty}function f(t,e,n,o,s,r){if(s){const c=u(e,n,o,r);t.p(c,s)}}function d(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function p(t){const e="string"==typeof t&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const h="undefined"!=typeof window;let $=h?()=>window.performance.now():()=>Date.now(),m=h?t=>requestAnimationFrame(t):t;const g=new Set;function y(t){g.forEach(e=>{e.c(t)||(g.delete(e),e.f())}),0!==g.size&&m(y)}function v(t){let e;return 0===g.size&&m(y),{promise:new Promise(n=>{g.add(e={c:t,f:n})}),abort(){g.delete(e)}}}function b(t,e){t.appendChild(e)}function x(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function w(t){const e=_("style");return function(t,e){b(t.head||t,e),e.sheet}(x(t),e),e.sheet}function A(t,e,n){t.insertBefore(e,n||null)}function k(t){t.parentNode&&t.parentNode.removeChild(t)}function _(t){return document.createElement(t)}function E(t){return document.createTextNode(t)}function z(){return E(" ")}function S(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function M(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function C(t,e){e=""+e,t.data!==e&&(t.data=e)}function R(t,e,n,o){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function B(t,e,n){t.classList[n?"add":"remove"](e)}function j(t,e,{bubbles:n=!1,cancelable:o=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,o,e),s}const T=new Map;let O,P=0;function I(t,e,n,o,s,r,c,i=0){const l=16.666/o;let u="{\n";for(let t=0;t<=1;t+=l){const o=e+(n-e)*r(t);u+=100*t+`%{${c(o,1-o)}}\n`}const a=u+`100% {${c(n,1-n)}}\n}`,f=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(a)}_${i}`,d=x(t),{stylesheet:p,rules:h}=T.get(d)||function(t,e){const n={stylesheet:w(e),rules:{}};return T.set(t,n),n}(d,t);h[f]||(h[f]=!0,p.insertRule(`@keyframes ${f} ${a}`,p.cssRules.length));const $=t.style.animation||"";return t.style.animation=`${$?$+", ":""}${f} ${o}ms linear ${s}ms 1 both`,P+=1,f}function N(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),s=n.length-o.length;s&&(t.style.animation=o.join(", "),P-=s,P||m(()=>{P||(T.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&k(e)}),T.clear())}))}function q(t){const e=getComputedStyle(t);if("absolute"!==e.position&&"fixed"!==e.position){const{width:n,height:o}=e,s=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=o,function(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const o=getComputedStyle(t),s="none"===o.transform?"":o.transform;t.style.transform=`${s} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}(t,s)}}function L(t){O=t}function D(){if(!O)throw new Error("Function called outside component initialization");return O}function F(){const t=D();return(e,n,{cancelable:o=!1}={})=>{const s=t.$$.callbacks[e];if(s){const r=j(e,n,{cancelable:o});return s.slice().forEach(e=>{e.call(t,r)}),!r.defaultPrevented}return!0}}function H(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(t=>t.call(this,e))}const X=[],Y=[];let G=[];const W=[],J=Promise.resolve();let Q=!1;function K(t){G.push(t)}const U=new Set;let V,Z=0;function tt(){if(0!==Z)return;const t=O;do{try{for(;Z<X.length;){const t=X[Z];Z++,L(t),et(t.$$)}}catch(t){throw X.length=0,Z=0,t}for(L(null),X.length=0,Z=0;Y.length;)Y.pop()();for(let t=0;t<G.length;t+=1){const e=G[t];U.has(e)||(U.add(e),e())}G.length=0}while(X.length);for(;W.length;)W.pop()();Q=!1,U.clear(),L(t)}function et(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(K)}}function nt(){return V||(V=Promise.resolve(),V.then(()=>{V=null})),V}function ot(t,e,n){t.dispatchEvent(j(`${e?"intro":"outro"}${n}`))}const st=new Set;let rt;function ct(){rt={r:0,c:[],p:rt}}function it(){rt.r||s(rt.c),rt=rt.p}function lt(t,e){t&&t.i&&(st.delete(t),t.i(e))}function ut(t,e,n,o){if(t&&t.o){if(st.has(t))return;st.add(t),rt.c.push(()=>{st.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}else o&&o()}const at={duration:0};function ft(t,e){t.f(),function(t,e){ut(t,1,1,()=>{e.delete(t.key)})}(t,e)}function dt(t){t&&t.c()}function pt(t,e,o,c){const{fragment:i,after_update:l}=t.$$;i&&i.m(e,o),c||K(()=>{const e=t.$$.on_mount.map(n).filter(r);t.$$.on_destroy?t.$$.on_destroy.push(...e):s(e),t.$$.on_mount=[]}),l.forEach(K)}function ht(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];G.forEach(o=>-1===t.indexOf(o)?e.push(o):n.push(o)),n.forEach(t=>t()),G=e}(n.after_update),s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function $t(t,e){-1===t.$$.dirty[0]&&(X.push(t),Q||(Q=!0,J.then(tt)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function mt(e,n,r,c,i,l,u,a=[-1]){const f=O;L(e);const d=e.$$={fragment:null,ctx:[],props:l,update:t,not_equal:i,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(f?f.$$.context:[])),callbacks:o(),dirty:a,skip_bound:!1,root:n.target||f.$$.root};u&&u(d.root);let p=!1;if(d.ctx=r?r(e,n.props||{},(t,n,...o)=>{const s=o.length?o[0]:n;return d.ctx&&i(d.ctx[t],d.ctx[t]=s)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](s),p&&$t(e,t)),n}):[],d.update(),p=!0,s(d.before_update),d.fragment=!!c&&c(d.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);d.fragment&&d.fragment.l(t),t.forEach(k)}else d.fragment&&d.fragment.c();n.intro&&lt(e.$$.fragment),pt(e,n.target,n.anchor,n.customElement),tt()}L(f)}class gt{$destroy(){ht(this,1),this.$destroy=t}$on(e,n){if(!r(n))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function yt(t){const e=t-1;return e*e*e+1}function vt(t){return--t*t*t*t*t+1}function bt(t,{from:e,to:n},o={}){const s=getComputedStyle(t),c="none"===s.transform?"":s.transform,[i,l]=s.transformOrigin.split(" ").map(parseFloat),u=e.left+e.width*i/n.width-(n.left+i),a=e.top+e.height*l/n.height-(n.top+l),{delay:f=0,duration:d=(t=>120*Math.sqrt(t)),easing:p=yt}=o;return{delay:f,duration:r(d)?d(Math.sqrt(u*u+a*a)):d,easing:p,css:(t,o)=>{const s=o*u,r=o*a,i=t+o*e.width/n.width,l=t+o*e.height/n.height;return`transform: ${c} translate(${s}px, ${r}px) scale(${i}, ${l});`}}}function xt(t,{delay:e=0,duration:n=400,easing:o=yt,x:s=0,y:r=0,opacity:c=0}={}){const i=getComputedStyle(t),l=+i.opacity,u="none"===i.transform?"":i.transform,a=l*(1-c),[f,d]=p(s),[h,$]=p(r);return{delay:e,duration:n,easing:o,css:(t,e)=>`\n\t\t\ttransform: ${u} translate(${(1-t)*f}${d}, ${(1-t)*h}${$});\n\t\t\topacity: ${l-a*e}`}}function wt(t,{delay:e=0,duration:n=400,easing:o=yt,start:s=0,opacity:r=0}={}){const c=getComputedStyle(t),i=+c.opacity,l="none"===c.transform?"":c.transform,u=1-s,a=i*(1-r);return{delay:e,duration:n,easing:o,css:(t,e)=>`\n\t\t\ttransform: ${l} scale(${1-u*e});\n\t\t\topacity: ${i-a*e}\n\t\t`}}function At(n){let o,c,i,u,p,h,m,g;const y=n[13].default,b=l(y,n,n[12],null);return{c(){o=_("div"),b&&b.c(),R(o,"--tile-size",n[1]+"px"),M(o,"class",c="tile tile-"+n[0]+" special-"+n[2]+" svelte-rudbdh"),M(o,"draggable",i=!0),B(o,"is-selected",n[3]||n[4])},m(t,e){A(t,o,e),b&&b.m(o,null),h=!0,m||(g=[S(o,"touchstart",n[5]),S(o,"touchmove",n[6]),S(o,"touchend",n[7],{passive:!0}),S(o,"dragstart",n[8]),S(o,"dragend",n[10]),S(o,"drag",n[9]),S(o,"click",n[14])],m=!0)},p(t,[e]){b&&b.p&&(!h||4096&e)&&f(b,y,t,t[12],h?a(y,t[12],e,null):d(t[12]),null),(!h||2&e)&&R(o,"--tile-size",t[1]+"px"),(!h||5&e&&c!==(c="tile tile-"+t[0]+" special-"+t[2]+" svelte-rudbdh"))&&M(o,"class",c),(!h||29&e)&&B(o,"is-selected",t[3]||t[4])},i(n){h||(lt(b,n),K(()=>{h&&(p&&p.end(1),u=function(n,o,s){const c={direction:"in"};let i,l,u=o(n,s,c),a=!1,f=0;function d(){i&&N(n,i)}function p(){const{delay:o=0,duration:s=300,easing:r=e,tick:c=t,css:p}=u||at;p&&(i=I(n,0,1,s,o,r,p,f++)),c(0,1);const h=$()+o,m=h+s;l&&l.abort(),a=!0,K(()=>ot(n,!0,"start")),l=v(t=>{if(a){if(t>=m)return c(1,0),ot(n,!0,"end"),d(),a=!1;if(t>=h){const e=r((t-h)/s);c(e,1-e)}}return a})}let h=!1;return{start(){h||(h=!0,N(n),r(u)?(u=u(c),nt().then(p)):p())},invalidate(){h=!1},end(){a&&(d(),a=!1)}}}(o,xt,{duration:250,delay:100,y:-100,opacity:0}),u.start())}),h=!0)},o(n){ut(b,n),u&&u.invalidate(),p=function(n,o,c){const i={direction:"out"};let l,u=o(n,c,i),a=!0;const f=rt;function d(){const{delay:o=0,duration:r=300,easing:c=e,tick:i=t,css:d}=u||at;d&&(l=I(n,1,0,r,o,c,d));const p=$()+o,h=p+r;K(()=>ot(n,!1,"start")),v(t=>{if(a){if(t>=h)return i(0,1),ot(n,!1,"end"),--f.r||s(f.c),!1;if(t>=p){const e=c((t-p)/r);i(1-e,e)}}return a})}return f.r+=1,r(u)?nt().then(()=>{u=u(i),d()}):d(),{end(t){t&&u.tick&&u.tick(1,0),a&&(l&&N(n,l),a=!1)}}}(o,wt,{duration:200}),h=!1},d(t){t&&k(o),b&&b.d(t),t&&p&&p.end(),m=!1,s(g)}}}function kt(t,e,n){let{$$slots:o={},$$scope:s}=e,{type:r}=e,{index:c}=e,{size:i}=e,{special:l}=e,{selected:u=!1}=e;const a=F(),f=new Image(0,0);f.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";let d,p,h,$,m=i-10,g=!1;function y(t){n(4,g=!0),d=t.touches?t.touches[0].clientX:t.clientX,p=t.touches?t.touches[0].clientY:t.clientY,h=0,$=0}function v(t){if(!g)return;const e=t.touches?t.touches[0].clientX:t.clientX,o=t.touches?t.touches[0].clientY:t.clientY;let s;h=d-e,$=p-o,h<-m?s="right":h>m?s="left":$<-m?s="down":$>m&&(s="up"),s&&(a("swipe",{direction:s,index:c}),n(4,g=!1))}function b(){n(4,g=!1)}return t.$$set=t=>{"type"in t&&n(0,r=t.type),"index"in t&&n(11,c=t.index),"size"in t&&n(1,i=t.size),"special"in t&&n(2,l=t.special),"selected"in t&&n(3,u=t.selected),"$$scope"in t&&n(12,s=t.$$scope)},[r,i,l,u,g,y,v,b,function(t){t.dataTransfer.setDragImage(f,0,0),y(t)},function(t){v(t)},function(){b()},c,s,o,function(e){H.call(this,t,e)}]}class _t extends gt{constructor(t){super(),mt(this,t,kt,At,c,{type:0,index:11,size:1,special:2,selected:3})}}const Et=[];let zt=0;function St(){return zt+=1,{id:zt,type:Math.floor(5*Math.random())+1}}function Mt(t,e){const n=t*e;let o=[];for(let t=0;t<n;t+=1)o[t]=St();let s=jt(o,t,e);for(;s.length>0;)o=Bt(o,t,e),s=jt(o,t,e);return o}function Ct(t,e){return{x:t%e,y:Math.floor(t/e)}}function Rt(t,e,n){const o=jt(t,e,n),s=[...t];return 0===o.length?t:(o.forEach(t=>{t.indices.forEach(t=>{s[t].type=null})}),s)}function Bt(t,e,n){Rt(t,e,n);const o=[...t];let s=[];for(let t=0;t<n;t+=1){const r=[];for(let s=e-1;s>-1;s-=1){const e=s*n+t;if(null===o[e].type)r.push(e);else if(r.length>0){const t=r.shift(),n=o[t];o[t]=o[e],o[e]=n,r.push(e)}}s=[...s,...r]}return s.forEach(t=>{o[t]=St()}),o}function jt(t,e,n,o=3){return[...function(t,e,n,o=3){const s=[];for(let r=0;r<e;r+=1){let e=1;for(let c=0;c<n;c+=1){const i=r*n+c;let l=!1;if(c===n-1?l=!0:t[i].type===t[i+1].type?e+=1:l=!0,l){if(e>=o){const t=i+1-e,n=i;s.push({start:t,end:n,indices:Tt(t,n),length:e,orientation:"horizontal"})}e=1}}}return s}(t,e,n,o),...function(t,e,n,o=3){const s=[];for(let r=0;r<n;r+=1){let c=1;for(let i=0;i<e;i+=1){const l=i*n+r;let u=!1;if(i===e-1?u=!0:t[l].type===t[l+n].type?c+=1:u=!0,u){if(c>=o){const t=l-(c-1)*n,e=l;s.push({start:t,end:e,indices:Tt(t,e,n),length:c,orientation:"vertical"})}c=1}}}return s}(t,e,n,o)]}function Tt(t,e,n=1){const o=[];let s=t;for(;s<=e;)o.push(s),s+=n;return o}const Ot=t=>e=>{const{board:n,rows:o,columns:s,score:r}=e,c=function(t,e,n,o){const s=jt(t,e,n);let r=0;return s.forEach(t=>{const e=t.indices.length-2;return r+=60*e*o}),r}(n,o,s,t)+r;return{...e,score:c}};var Pt=function(){const{subscribe:e,update:n}=function(e,n=t){let o;const s=new Set;function r(t){if(c(e,t)&&(e=t,o)){const t=!Et.length;for(const t of s)t[1](),Et.push(t,e);if(t){for(let t=0;t<Et.length;t+=2)Et[t][0](Et[t+1]);Et.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(c,i=t){const l=[c,i];return s.add(l),1===s.size&&(o=n(r)||t),c(e),()=>{s.delete(l),0===s.size&&o&&(o(),o=null)}}}}({});return{subscribe:e,update:n,init:(t,e,o)=>n(((t,e,n)=>o=>({rows:t,columns:e,board:Mt(t,e),startingMoves:n,moves:n,score:0}))(t,e,o)),reset:()=>n(t=>({...t,board:Mt(t.rows,t.columns),moves:t.startingMoves,score:0})),swapTiles:(t,e)=>n(((t,e)=>n=>{const{board:o}=n,s=o[t];return o[t]=o[e],o[e]=s,{...n,board:o}})(t,e)),decrementMoves:()=>n(t=>({...t,moves:t.moves-1})),resolveBoard:function t(e,o,s=1){n(t=>{const{board:e,rows:n,columns:o}=t,s=Rt(e,n,o);return{...t,board:s}}),setTimeout(()=>{n(Ot(s)),n(t=>{const{board:e,rows:n,columns:o}=t,s=Bt(e,n,o);return{...t,board:s}}),e(),setTimeout(()=>{n(((t,e,n,o)=>s=>{const{board:r,rows:c,columns:i}=s;return jt(r,c,i).length>0?t(e,n,o+1):n(),s})(t,e,o,s))},350)},200)}}}();function It(t,e,n){const o=t.slice();return o[18]=e[n],o[20]=n,o}function Nt(t,e,n){const o=t.slice();return o[21]=e[n],o[20]=n,o}function qt(t){let e,n;return e=new _t({props:{type:t[21].type,special:t[21].special,size:t[0],index:t[20],selected:t[2](t[20])}}),e.$on("click",(function(){return t[12](t[20])})),e.$on("swipe",t[7]),{c(){dt(e.$$.fragment)},m(t,o){pt(e,t,o),n=!0},p(n,o){t=n;const s={};2&o&&(s.type=t[21].type),2&o&&(s.special=t[21].special),1&o&&(s.size=t[0]),2&o&&(s.index=t[20]),6&o&&(s.selected=t[2](t[20])),e.$set(s)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ut(e.$$.fragment,t),n=!1},d(t){ht(e,t)}}}function Lt(n,o){let s,r,c,i,l=t,u=null!==o[21].type&&qt(o);return{key:n,first:null,c(){s=_("span"),u&&u.c(),M(s,"class","tile-wrapper svelte-lfzdol"),M(s,"style",r=o[4](o[20])),this.first=s},m(t,e){A(t,s,e),u&&u.m(s,null),i=!0},p(t,e){null!==(o=t)[21].type?u?(u.p(o,e),2&e&&lt(u,1)):(u=qt(o),u.c(),lt(u,1),u.m(s,null)):u&&(ct(),ut(u,1,1,()=>{u=null}),it()),(!i||18&e&&r!==(r=o[4](o[20])))&&M(s,"style",r)},r(){c=s.getBoundingClientRect()},f(){q(s),l()},a(){l(),l=function(n,o,s,r){if(!o)return t;const c=n.getBoundingClientRect();if(o.left===c.left&&o.right===c.right&&o.top===c.top&&o.bottom===c.bottom)return t;const{delay:i=0,duration:l=300,easing:u=e,start:a=$()+i,end:f=a+l,tick:d=t,css:p}=s(n,{from:o,to:c},r);let h,m=!0,g=!1;function y(){p&&N(n,h),m=!1}return v(t=>{if(!g&&t>=a&&(g=!0),g&&t>=f&&(d(1,0),y()),!m)return!1;if(g){const e=0+1*u((t-a)/l);d(e,1-e)}return!0}),p&&(h=I(n,0,1,l,i,u,p)),i||(g=!0),d(0,1),y}(s,c,bt,{delay:0,duration:250,easing:vt})},i(t){i||(lt(u),i=!0)},o(t){ut(u),i=!1},d(t){t&&k(s),u&&u.d()}}}function Dt(t){let e,n;return{c(){e=_("div"),M(e,"class","cell svelte-lfzdol"),M(e,"style",n=t[4](t[18])),B(e,"is-selected",t[2](t[20]))},m(t,n){A(t,e,n)},p(t,o){48&o&&n!==(n=t[4](t[18]))&&M(e,"style",n),4&o&&B(e,"is-selected",t[2](t[20]))},d(t){t&&k(e)}}}function Ft(t){let e,n,o,r,c=[],i=new Map,l=t[1];const u=t=>t[21].id;for(let e=0;e<l.length;e+=1){let n=Nt(t,l,e),o=u(n);i.set(o,c[e]=Lt(o,n))}let a=t[5],f=[];for(let e=0;e<a.length;e+=1)f[e]=Dt(It(t,a,e));return{c(){e=_("main"),n=_("div");for(let t=0;t<c.length;t+=1)c[t].c();o=z();for(let t=0;t<f.length;t+=1)f[t].c();M(n,"class","board svelte-lfzdol"),M(n,"style",t[3]),M(e,"class","svelte-lfzdol")},m(t,s){A(t,e,s),b(e,n);for(let t=0;t<c.length;t+=1)c[t]&&c[t].m(n,null);b(n,o);for(let t=0;t<f.length;t+=1)f[t]&&f[t].m(n,null);r=!0},p(t,[e]){if(215&e){l=t[1],ct();for(let t=0;t<c.length;t+=1)c[t].r();c=function(t,e,n,o,r,c,i,l,u,a,f,d){let p=t.length,h=c.length,$=p;const m={};for(;$--;)m[t[$].key]=$;const g=[],y=new Map,v=new Map,b=[];for($=h;$--;){const t=d(r,c,$),s=n(t);let l=i.get(s);l?o&&b.push(()=>l.p(t,e)):(l=a(s,t),l.c()),y.set(s,g[$]=l),s in m&&v.set(s,Math.abs($-m[s]))}const x=new Set,w=new Set;function A(t){lt(t,1),t.m(l,f),i.set(t.key,t),f=t.first,h--}for(;p&&h;){const e=g[h-1],n=t[p-1],o=e.key,s=n.key;e===n?(f=e.first,p--,h--):y.has(s)?!i.has(o)||x.has(o)?A(e):w.has(s)?p--:v.get(o)>v.get(s)?(w.add(o),A(e)):(x.add(s),p--):(u(n,i),p--)}for(;p--;){const e=t[p];y.has(e.key)||u(e,i)}for(;h;)A(g[h-1]);return s(b),g}(c,e,u,1,t,l,i,n,ft,Lt,o,Nt);for(let t=0;t<c.length;t+=1)c[t].a();it()}if(52&e){let o;for(a=t[5],o=0;o<a.length;o+=1){const s=It(t,a,o);f[o]?f[o].p(s,e):(f[o]=Dt(s),f[o].c(),f[o].m(n,null))}for(;o<f.length;o+=1)f[o].d(1);f.length=a.length}(!r||8&e)&&M(n,"style",t[3])},i(t){if(!r){for(let t=0;t<l.length;t+=1)lt(c[t]);r=!0}},o(t){for(let t=0;t<c.length;t+=1)ut(c[t]);r=!1},d(t){t&&k(e);for(let t=0;t<c.length;t+=1)c[t].d();!function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(f,t)}}}function Ht(t,e,n){let o,s,r,c,l,u,a,f,d;i(t,Pt,t=>n(11,d=t));const p=F(),h=new Audio("/assets/match.wav");let $=document.body.clientWidth,m=g(d.columns);function g(t){$=document.body.clientWidth;let e=100+60*t;return $>=e?60:(e=100+50*t,$>=e?50:(e=100+40*t,$>=e?40:(e=100+30*t,$>=e?30:(e=100+20*t,$>=e?20:10))))}function y(t,e){Pt.swapTiles(t,e),setTimeout(()=>{0===jt(o,s,r).length?Pt.swapTiles(t,e):(Pt.decrementMoves(),Pt.resolveBoard(()=>{h.currentTime=0,h.play()},()=>{0===d.moves&&p("game-over",{score:d.score})}))},200),n(9,l=null)}function v(t){return u(t)?n(9,l=null):null===l?n(9,l=t):function(t,e,n){const o=Ct(t,n),s=Ct(e,n);return o.x===s.x&&1===Math.abs(o.y-s.y)||o.y===s.y&&1===Math.abs(o.x-s.x)}(l,t,r)?void y(l,t):n(9,l=null)}var b;b=()=>{window.addEventListener("resize",()=>{requestAnimationFrame(()=>{const t=g(d.columns);t!==m&&n(0,m=t)})})},D().$$.on_mount.push(b);return t.$$.update=()=>{2048&t.$$.dirty&&n(1,o=d.board),2048&t.$$.dirty&&n(10,s=d.rows),2048&t.$$.dirty&&n(8,r=d.columns),2&t.$$.dirty&&n(5,c=[...Array(o.length).keys()]),512&t.$$.dirty&&n(2,u=t=>l===t),257&t.$$.dirty&&n(4,a=t=>{const e=Math.floor(t/r);return`\n      top: ${m*e+10}px;\n      left: ${m*(t%r)+10}px;\n    `}),1281&t.$$.dirty&&n(3,f=`\n    width: ${m*r+20}px;\n    height: ${m*s+20}px;\n    --tile-size: ${m}px;\n  `)},n(9,l=null),[m,o,u,f,a,c,v,function(t){const{direction:e,index:n}=t.detail;switch(e){case"left":if(n%r==0)return;return y(n,n-1);case"right":if(n%r==r-1)return;return y(n,n+1);case"up":if(n<r)return;return y(n,n-r);case"down":if(n+r>=o.length)return;return y(n,n+r);default:return}},r,l,s,d,t=>v(t)]}class Xt extends gt{constructor(t){super(),mt(this,t,Ht,Ft,c,{})}}function Yt(e){let n,o,s,r,c,i,l,u,a,f,d,p,h=e[0].moves+"",$=e[0].score+"";return{c(){n=_("header"),o=_("div"),s=_("div"),s.textContent="Moves",r=z(),c=_("div"),i=E(h),l=z(),u=_("div"),a=_("div"),a.textContent="Score",f=z(),d=_("div"),p=E($),M(s,"class","group-label"),M(c,"class","group-value svelte-87os51"),M(o,"class","group moves svelte-87os51"),M(a,"class","group-label"),M(d,"class","group-value svelte-87os51"),M(u,"class","group score svelte-87os51"),M(n,"class","svelte-87os51")},m(t,e){A(t,n,e),b(n,o),b(o,s),b(o,r),b(o,c),b(c,i),b(n,l),b(n,u),b(u,a),b(u,f),b(u,d),b(d,p)},p(t,[e]){1&e&&h!==(h=t[0].moves+"")&&C(i,h),1&e&&$!==($=t[0].score+"")&&C(p,$)},i:t,o:t,d(t){t&&k(n)}}}function Gt(t,e,n){let o;return i(t,Pt,t=>n(0,o=t)),[o]}class Wt extends gt{constructor(t){super(),mt(this,t,Gt,Yt,c,{})}}function Jt(t){let e,n,o,s;const r=t[1].default,c=l(r,t,t[0],null);return{c(){e=_("button"),c&&c.c(),M(e,"class","svelte-1m9iqve")},m(r,i){A(r,e,i),c&&c.m(e,null),n=!0,o||(s=S(e,"click",t[2]),o=!0)},p(t,[e]){c&&c.p&&(!n||1&e)&&f(c,r,t,t[0],n?a(r,t[0],e,null):d(t[0]),null)},i(t){n||(lt(c,t),n=!0)},o(t){ut(c,t),n=!1},d(t){t&&k(e),c&&c.d(t),o=!1,s()}}}function Qt(t,e,n){let{$$slots:o={},$$scope:s}=e;return t.$$set=t=>{"$$scope"in t&&n(0,s=t.$$scope)},[s,o,function(e){H.call(this,t,e)}]}class Kt extends gt{constructor(t){super(),mt(this,t,Qt,Jt,c,{})}}function Ut(t){let e;return{c(){e=E("Reset")},m(t,n){A(t,e,n)},d(t){t&&k(e)}}}function Vt(t){let e,n,o,s,r;return s=new Kt({props:{$$slots:{default:[Ut]},$$scope:{ctx:t}}}),s.$on("click",Pt.reset),{c(){e=_("footer"),n=_("div"),n.innerHTML='<p class="svelte-mcd5hl">Svelte Candy Crush by <a href="https://github.com/RedEdge967" target="_blank" class="svelte-mcd5hl">@Chandula Janith</a></p> \n    <p class="svelte-mcd5hl">See the Source code on <a href="https://github.com/RedEdge967/candy-crush" target="_blank" class="svelte-mcd5hl">GitHub</a></p>',o=z(),dt(s.$$.fragment),M(n,"class","credits svelte-mcd5hl"),M(e,"class","svelte-mcd5hl")},m(t,c){A(t,e,c),b(e,n),b(e,o),pt(s,e,null),r=!0},p(t,[e]){const n={};1&e&&(n.$$scope={dirty:e,ctx:t}),s.$set(n)},i(t){r||(lt(s.$$.fragment,t),r=!0)},o(t){ut(s.$$.fragment,t),r=!1},d(t){t&&k(e),ht(s)}}}class Zt extends gt{constructor(t){super(),mt(this,t,null,Vt,c,{})}}function te(t){let e;return{c(){e=E("Play Again")},m(t,n){A(t,e,n)},d(t){t&&k(e)}}}function ee(t){let e,n,o,s,r,c,i,l,u,a,f,d,p;return d=new Kt({props:{$$slots:{default:[te]},$$scope:{ctx:t}}}),d.$on("click",t[4]),{c(){e=_("div"),n=_("div"),o=_("div"),o.textContent="Game Over",s=z(),r=_("div"),c=E(t[1]),i=z(),l=_("div"),u=E("Best: "),a=E(t[2]),f=z(),dt(d.$$.fragment),M(o,"class","title svelte-1kzjg8m"),M(r,"class","score svelte-1kzjg8m"),M(l,"class","best-score svelte-1kzjg8m"),M(n,"class","modal svelte-1kzjg8m"),M(e,"class","overlay svelte-1kzjg8m"),B(e,"visible",t[0])},m(t,h){A(t,e,h),b(e,n),b(n,o),b(n,s),b(n,r),b(r,c),b(n,i),b(n,l),b(l,u),b(l,a),b(n,f),pt(d,n,null),p=!0},p(t,[n]){(!p||2&n)&&C(c,t[1]),(!p||4&n)&&C(a,t[2]);const o={};32&n&&(o.$$scope={dirty:n,ctx:t}),d.$set(o),(!p||1&n)&&B(e,"visible",t[0])},i(t){p||(lt(d.$$.fragment,t),p=!0)},o(t){ut(d.$$.fragment,t),p=!1},d(t){t&&k(e),ht(d)}}}function ne(t,e,n){let{visible:o=!1}=e,{score:s=""}=e,{bestScore:r=""}=e;const c=F();return t.$$set=t=>{"visible"in t&&n(0,o=t.visible),"score"in t&&n(1,s=t.score),"bestScore"in t&&n(2,r=t.bestScore)},[o,s,r,c,()=>c("play-again")]}class oe extends gt{constructor(t){super(),mt(this,t,ne,ee,c,{visible:0,score:1,bestScore:2})}}function se(t){let e,n,o,s,r,c,i,l,u,a,f;return n=new Wt({}),s=new Xt({}),s.$on("game-over",t[3]),c=new Zt({}),l=new oe({props:{score:t[2],bestScore:t[1],visible:t[0]}}),l.$on("play-again",t[4]),{c(){e=_("main"),dt(n.$$.fragment),o=z(),dt(s.$$.fragment),r=z(),dt(c.$$.fragment),i=z(),dt(l.$$.fragment),u=z(),a=_("div"),a.textContent="Please rotate phone 😄",M(e,"class","svelte-1vyypha"),M(a,"class","please-rotate svelte-1vyypha")},m(t,d){A(t,e,d),pt(n,e,null),b(e,o),pt(s,e,null),b(e,r),pt(c,e,null),b(e,i),pt(l,e,null),A(t,u,d),A(t,a,d),f=!0},p(t,[e]){const n={};4&e&&(n.score=t[2]),2&e&&(n.bestScore=t[1]),1&e&&(n.visible=t[0]),l.$set(n)},i(t){f||(lt(n.$$.fragment,t),lt(s.$$.fragment,t),lt(c.$$.fragment,t),lt(l.$$.fragment,t),f=!0)},o(t){ut(n.$$.fragment,t),ut(s.$$.fragment,t),ut(c.$$.fragment,t),ut(l.$$.fragment,t),f=!1},d(t){t&&k(e),ht(n),ht(s),ht(c),ht(l),t&&k(u),t&&k(a)}}}function re(t,e,n){let o;i(t,Pt,t=>n(5,o=t));const{rows:s,columns:r}=function(){const t=document.body.clientWidth;document.body.clientHeight;let e=7;return t>=700?e=10:t>=580&&(e=8),{rows:8,columns:e}}();Pt.init(s,r,20);let c,l,u=!1;return[u,c,l,function(t){n(2,l=o.score);const e=localStorage.getItem("best-score")||0,s=Math.max(l,parseInt(e,10));localStorage.setItem("best-score",s),n(1,c=s),n(0,u=!0)},function(){Pt.reset(),n(0,u=!1)}]}class ce extends gt{constructor(t){super(),mt(this,t,re,se,c,{})}}function ie(e){let n,o,s;return o=new ce({}),{c(){n=_("main"),dt(o.$$.fragment),M(n,"class","svelte-1bymns")},m(t,e){A(t,n,e),pt(o,n,null),s=!0},p:t,i(t){s||(lt(o.$$.fragment,t),s=!0)},o(t){ut(o.$$.fragment,t),s=!1},d(t){t&&k(n),ht(o)}}}return new class extends gt{constructor(t){super(),mt(this,t,null,ie,c,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
